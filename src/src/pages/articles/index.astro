---
import { SITE_TITLE, SITE_DESCRIPTION } from "../../consts";
import { getCollection } from "astro:content";
import FormattedDate from "../../components/FormattedDate.astro";
import Layout from "../../layouts/BaseLayout.astro";

const posts = (await getCollection("article")).sort(
	(a, b) => b.data.publishedDate.valueOf() - a.data.publishedDate.valueOf(),
);
---

<Layout title={SITE_TITLE} description={SITE_DESCRIPTION}>
	<style>
		article {
			border: 1px solid #dad9d9;
			border-radius: 5px;
			box-shadow: rgba(0, 0, 0, 0.2) 0 4px 2px -2px;
			margin-bottom: 30px;
			padding: 0.5rem 3rem;
		}

		.title {
			padding-top: 10px;
		}

		.title a {
			color: #d35244;
			text-decoration: none;
		}

		footer {
			border-top: 1px solid #e6e6e6;
			padding: 0.9rem 0;
		}

		.read-more {
			color: #d35244;
			font-size: 1rem;
			height: 1.5rem;
			letter-spacing: 1px;
			line-height: 1.5rem;
			text-align: center;
			text-transform: uppercase;
			position: relative;
			white-space: nowrap;
			border: 1px solid #d35244;
			border-radius: 3px;
			padding: 0.2rem 0.5rem;
			text-decoration: none;
		}

		.read-more:hover {
			text-decoration: none;
			background: #d35244;
			color: #ffffff;
			transition:
				background ease-in-out 250ms,
				transform ease-in-out 250ms;
		}
	</style>

	<section>
		{
			posts.map((post) => (
				<article>
					<h4 class="title">
						<a href={`${Astro.url}/${post.slug}/`}>
							{post.data.title}
						</a>
					</h4>
					<p>{post.data.description}</p>
					<footer>
						<a
							class="read-more"
							href={`${Astro.url}/${post.slug}/`}
						>
							READ MORE
						</a>
					</footer>
				</article>
			))
		}
	</section>
</Layout>
